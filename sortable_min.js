const getUtils=function(e={}){return{cssClasses:{grabbingClass:"cursor-grabbing",noUserSelection:"no-user-selection",sortingItem:"current-sorting",clonedPreview:"sorting-clone-preview",cloneMoving:"clone-moving",cloned:"cloned",sortMoving:"sort-moving",sortable:"sortable",containment:"sortable-containment",appendableClasss:"sort-appendable",defaultHeight:"default-height",fallBackElement:"fallback-element",fallBackPreview:"fallback-preview",fallBackClone:"fallback-clone"},sortableFigures:{mouseX:0,mouseY:0,windowScroll:{x:0,y:0},clonedPreview:null,sortableParent:null,orignalFallback:null,fallBackElement:null,fallBackClone:null,cloneDistance:{y:0,x:0},initial:{scrollY:0,scrollX:0,elementPosition:{left:0,top:0}},itemDetails:{startedFrom:{},endedOn:{}}},injectCss(){let e=document.querySelector("[data-sortable-css]");if(!e){let s=`.${this.cssClasses.containment} {scroll-behavior: smooth;}.${this.cssClasses.sortable} , .${this.cssClasses.sortable}:hover {    cursor: grab;}.${this.cssClasses.sortable}.${this.cssClasses.grabbingClass}:hover {    cursor: grabbing;}.${this.cssClasses.noUserSelection} , .${this.cssClasses.noUserSelection} * {    user-select: none !important;}.${this.cssClasses.sortMoving} {    background: #00000094 !important;    opacity: 0.5;}.${this.cssClasses.sortMoving} *{    opacity: 0 !important;}.${this.cssClasses.cloneMoving} {    opacity: 0.7;}.${this.cssClasses.appendableClasss} {  border: solid 1px gray;}.${this.cssClasses.defaultHeight} , .${this.cssClasses.containment} {  padding: 8px;}`,t=document.createElement("style");t.dataset.sortableCss=!0,t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s)),document.getElementsByTagName("head")[0].appendChild(t)}},getClone(s){let t=(t=>{let l=t.getBoundingClientRect(),i=t.cloneNode(!0),{top:a,left:n}=this.getElementPosition(s);return i.style.position="fixed",i.style.top=a+"px",i.style.left=n+"px",i.style.width=l.width+"px",i.style.margin=0,i.style.zIndex=1e3,i.style.pointerEvents="none",i.style.boxSizing="border-box",i.style.userSelect="none",this.updateClass(i,this.cssClasses.clonedPreview),this.updateClass(i,e.draggingClass),i})(s);return s?.after(t),t},throwError(e){console.error(Error(e))},getItemDetail(e){let s=e.parentNode;if(!e||!s)return{};let t=Array.from(s.children).indexOf(e);return{element:e,index:t,parent:s}},anyChange({startedFrom:e,endedOn:s}){let t=!1;return Object.keys(e).forEach(l=>{e[l]!==s[l]&&(t=!0)}),t},getElementPosition(e,s){let t=e.getBoundingClientRect(),{y:l,x:i}=t,a=parseFloat(getComputedStyle(e).outlineWidth);if(s){let n=s.getBoundingClientRect(),o=s.scrollTop,r=s.scrollLeft;l=l-n.y+o,i=i-n.x+r}return s&&a&&(l-=a,i-=a),{top:l,left:i}},handleDefaultHeight(e){if(e){let s=30>parseInt(getComputedStyle(e).height);s&&this.updateClass(e,this.cssClasses.defaultHeight)}},setInitalData(s){this.updateClass(s,this.cssClasses.sortable),this.updateClass(s,e.itemClass);let t=s.closest("."+this.cssClasses.appendableClasss)||s.parentElement;t&&(this.sortableFigures.sortableParent=t,this.updateClass(t,this.cssClasses.containment)),e.containers&&"string"==typeof e.containers&&e.containers.split(",").forEach(e=>{document.querySelectorAll("."+e).forEach(e=>{this.updateClass(e,this.cssClasses.appendableClasss),this.handleDefaultHeight(e)})});let l=e.fallBackElement;if(l){if("string"==typeof l){let i=document.createElement("div");i.innerHTML=l,l=i.childNodes[0]}try{l.classList.add(this.cssClasses.fallBackPreview),this.sortableFigures.orignalFallback=l}catch(a){this.throwError("Please enter valid html for fallback Element")}}},updateClass(e,s,t="add"){s&&e?.classList[t](s)},initMouseDown(s,t,l){if(t){let i=this.getItemDetail(t);this.updateClass(t,this.cssClasses.grabbingClass),this.updateClass(t,this.cssClasses.sortingItem),this.updateElementsInitialPosition(t),this.sortableFigures.itemDetails.startedFrom=i,e.onStart({startFrom:i})}l&&(this.updateClass(l,this.cssClasses.grabbingClass),this.sortableFigures.mouseY=s.pageY,this.sortableFigures.mouseX=s.pageX,this.sortableFigures.windowScroll={x:window.scrollX,y:window.scrollY}),this.updateClass(document.body,this.cssClasses.noUserSelection)},updateElementsInitialPosition(e){let s=this.sortableFigures.sortableParent?.scrollTop,t=this.sortableFigures.sortableParent?.scrollLeft;this.sortableFigures.initial.scrollY=s,this.sortableFigures.initial.scrollX=t},windowScrollIdNeeded({clientX:e,clientY:s}){let{innerHeight:t,innerWidth:l}=window,i=s<50,a=s>t-50;if((i||a)&&!this.interval){let n=i?-50:50;this.interval=setInterval(()=>{window.scrollTo(0,window.scrollY+n)},50)}i||a||(clearInterval(this.interval),this.interval=null)},interval:null,movePreview({event:s}){let{pageY:t,pageX:l}=s,i=this.sortableFigures.clonedPreview,a=this.sortableFigures.mouseY-t,n=this.sortableFigures.mouseX-l,{y:o,x:r}=this.sortableFigures.cloneDistance,c=window.scrollX,d=window.scrollY,{x:h,y:u}=this.sortableFigures.windowScroll;c!==h&&(this.sortableFigures.windowScroll.x=c,r-=c-h),d!==u&&(o+=d-u);let g=l/e.zoom-n,m=t/e.zoom-a;i.style.left=g-r+"px",i.style.top=m-o+"px",this.sortableFigures.mouseY=t,this.sortableFigures.mouseX=l,this.windowScrollIdNeeded(s)},sortElement({event:s,sortingElement:t,path:l}){let{clientX:i,clientY:a}=s,n=document.elementsFromPoint(i,a),o=this.cssClasses,r=(e,s)=>e===s?.parentElement,c=n[0],d=!c?.classList.contains(o.sortingItem)&&!c?.closest("."+o.sortingItem)&&c?.classList.contains(o.sortable),h=n.find(e=>e?.classList.contains(o.containment)),u=n.find(e=>e?.classList.contains(o.appendableClasss)&&!e?.classList.contains(o.clonedPreview)),g=u||h,m=(()=>{let s=this.sortableFigures.orignalFallback;if(s){let t=this.sortableFigures.fallBackElement;if(t?.classList.contains(o.fallBackPreview)&&this.sortableFigures.itemDetails.startedFrom.parent===g&&t.remove(),e.fallBackClone){let l=this.sortableFigures.fallBackClone,i=!l?.classList.contains(o.fallBackClone);if(!i)return l;{let a=s.cloneNode(!0);return this.sortableFigures.fallBackClone=a,this.sortableFigures.fallBackElement=a,this.updateClass(a,o.fallBackClone),a}}return this.sortableFigures.fallBackElement=s,s}return!1})(),b=()=>{if(m&&this.sortableFigures.itemDetails.startedFrom.parent!==g)return!0},p=()=>{let s=e=>{let s=e||t,l=g!==s&&!g.classList.contains(o.clonedPreview)&&s.closest("."+o.appendableClasss)!==g;!r(g,s)&&l&&g.append(s)};if(m)b()&&s(m);else if(u){let l=e.containers.split(","),i=u.classList,a=!1;for(let n=0;n<l.length;n++)if(i.contains(l[n])){a=!0;break}a&&s()}else s()},C=()=>{let s=s=>{let l=s||t,i=c.getBoundingClientRect(),n=i.y+i.height/2,r=!c.classList.contains(o.appendableClasss);if(!r)return!0;n<a/e.zoom?c.after(l):c.before(l)};if(m){if(b()){let l=s(m);if(l)return!0}}else if(u){if(e.containers){let i=s();if(i)return!0}}else{let n=s();if(n)return!0}};if(g){if(u){let f=()=>{e.containers&&p()},{top:v,bottom:$}=u.getBoundingClientRect(),F=a>=v&&a<v+10,y=F||a<=$&&a>$-10;if(d){if(y){let E=u.querySelector("."+o.sortable);E&&!m&&u.parentElement.classList.contains(o.appendableClasss)&&(F?u.before(t):u.after(t))}else{let w=C();w&&!y&&f()}}else f()}else d?C():p()}},terminateMouseDown(s,t){let l="0.15s",i=1e3*parseFloat(l);if(s){let{scrollY:a,scrollX:n}=this.sortableFigures.initial;this.sortableFigures.sortableParent.scrollTo({top:a,left:n,behavior:"smooth"}),clearInterval(this.interval),this.interval=null;let o=this.sortableFigures.fallBackElement;if(o){let r=this.getItemDetail(this.sortableFigures.fallBackElement);this.sortableFigures.itemDetails.endedOn=r,this.sortableFigures.fallBackElement=null,this.sortableFigures.fallBackClone=null}else this.sortableFigures.itemDetails.endedOn=this.getItemDetail(s);setTimeout(()=>{this.updateClass(s,this.cssClasses.grabbingClass,"remove"),this.updateClass(s,this.cssClasses.sortingItem,"remove")},i)}else console.error("element not found !");if(t){this.updateClass(t,this.cssClasses.grabbingClass,"remove"),t.style.transition=`${l}`;let{top:c,left:d}=this.getElementPosition(s,e.containment),{width:h,height:u}=getComputedStyle(s);t.style.top=c+"px",t.style.left=d+"px",t.style.width=h,t.style.height=u,setTimeout(()=>{t.remove(),this.updateClass(s,this.cssClasses.sortMoving,"remove")},i)}else console.error("cloned not found !");e.containment&&(e.containment.onscroll=null);let{itemDetails:g}=this.sortableFigures;g.endedOn?.element&&this.anyChange(g)&&e.onSort(g),e.onDrop(g),this.updateClass(document.body,this.cssClasses.noUserSelection,"remove"),e.fallBackElement&&this.sortableFigures.fallBackClone?.classList.remove(this.cssClasses.fallBackClone)}}};function Sortable(e,s={}){if(!e)return console.error("Element is not provided !"),{};if(e.closest("pre"))return console.warn("Element inside pre Tag is not supported!"),{};let t={containment:null,zoom:1,fallBackClone:!0,onStart(){},onSort(){},onDrop(){},itemClass:"",draggingClass:"",containers:"",disabledClass:"",...s},l=getUtils(t);l.injectCss(),l.setInitalData(e);let i=s=>{s.stopPropagation();let i=l.getClone(e);l.sortableFigures.clonedPreview=i;let o={},{pageX:r,pageY:c}=s,d=s.currentTarget,{x:h,y:u}=d.getBoundingClientRect();o.y=c/t.zoom-u,o.x=r/t.zoom-h,l.sortableFigures.cloneDistance=o,l.initMouseDown(s,e,i),document.addEventListener("mousemove",a),document.addEventListener("touchmove",a),document.addEventListener("mouseup",n),document.addEventListener("touchend",n)},a=s=>{let t="touchmove"===s.type;if(s.stopPropagation(),l.updateClass(l.sortableFigures.clonedPreview,l.cssClasses.cloneMoving),l.updateClass(e,l.cssClasses.sortMoving),t){let i=s.targetTouches[0];l.movePreview({event:i}),l.sortElement({event:i,sortingElement:e,path:s.path})}else l.movePreview({event:s}),l.sortElement({event:s,sortingElement:e,path:s.path});l.updateElementsInitialPosition(e)},n=s=>{s.stopPropagation(),l.terminateMouseDown(e,l.sortableFigures.clonedPreview),document.removeEventListener("mousemove",a),document.removeEventListener("touchmove",a),document.removeEventListener("mouseup",n)};e.addEventListener("pointerdown",i),this.disable=function(s=!0){e?s?(e.removeEventListener("pointerdown",i),e.classList.remove(l.cssClasses.sortable),t.disabledClass&&e.classList.remove(t.disabledClass)):(e.addEventListener("pointerdown",i),t.disabledClass&&e.classList.add(t.disabledClass)):console.error("Unable to disable because the  element you are trying to disable is not sortable")}}