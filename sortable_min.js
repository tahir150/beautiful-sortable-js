const getUtils=function(s={}){return{cssClasses:{grabbingClass:"cursor-grabbing",noUserSelection:"no-user-selection",sortingItem:"current-sorting",clonedPreview:"sorting-clone-preview",cloneMoving:"clone-moving",cloned:"cloned",sortMoving:"sort-moving",sortable:"sortable",containment:"sortable-containment",appendableClasss:"sort-appendable",defaultHeight:"default-height",fallBackElement:"fallback-element",fallBackPreview:"fallback-preview",fallBackClone:"fallback-clone"},sortableFigures:{mouseX:0,mouseY:0,windowScroll:{x:0,y:0},clonedPreview:null,sortableParent:null,orignalFallback:null,fallBackElement:null,fallBackClone:null,cloneDistance:{y:0,x:0},initial:{scrollY:0,scrollX:0,elementPosition:{left:0,top:0}},itemDetails:{startedFrom:{},endedOn:{}}},injectCss(){let s=document.querySelector("[data-sortable-css]");if(!s){let e=`.${this.cssClasses.containment} {scroll-behavior: smooth;}.${this.cssClasses.sortable} , .${this.cssClasses.sortable}:hover {cursor: grab;}.${this.cssClasses.sortable}.${this.cssClasses.grabbingClass}:hover {cursor: grabbing;}.${this.cssClasses.noUserSelection} , .${this.cssClasses.noUserSelection} * {user-select: none !important;}.${this.cssClasses.sortMoving} {background: #00000094 !important;opacity: 0.5;}.${this.cssClasses.sortMoving} *{opacity: 0 !important;}.${this.cssClasses.cloneMoving} {    opacity: 0.7;}.${this.cssClasses.appendableClasss} {  border: solid 1px gray;}.${this.cssClasses.defaultHeight} , .${this.cssClasses.containment} {  padding: 8px;}`,t=document.createElement("style");t.dataset.sortableCss=!0,t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(t)}},getClone(e){let t=(t=>{let l=t.getBoundingClientRect(),a=t.cloneNode(!0),{top:i,left:o}=this.getElementPosition(e);return a.style.position="fixed",a.style.top=i+"px",a.style.left=o+"px",a.style.width=l.width+"px",a.style.margin=0,a.style.zIndex=1e3,a.style.pointerEvents="none",a.style.boxSizing="border-box",a.style.userSelect="none",this.updateClass(a,this.cssClasses.clonedPreview),this.updateClass(a,s.draggingClass),a})(e);return e?.after(t),t},throwError(s){console.error(Error(s))},getItemDetail(s){let e=s.parentNode;if(!s||!e)return{};let t=Array.from(e.children).indexOf(s);return{element:s,index:t,parent:e}},anyChange({startedFrom:s,endedOn:e}){let t=!1;return Object.keys(s).forEach(l=>{s[l]!==e[l]&&(t=!0)}),t},getElementPosition(s,e){let t=s.getBoundingClientRect(),{y:l,x:a}=t,i=parseFloat(getComputedStyle(s).outlineWidth);if(e){let o=e.getBoundingClientRect(),n=e.scrollTop,r=e.scrollLeft;l=l-o.y+n,a=a-o.x+r}return e&&i&&(l-=i,a-=i),{top:l,left:a}},handleDefaultHeight(s){if(s){let e=30>parseInt(getComputedStyle(s).height);e&&this.updateClass(s,this.cssClasses.defaultHeight)}},setInitalData(e){this.updateClass(e,this.cssClasses.sortable),this.updateClass(e,s.itemClass);let t=e.closest("."+this.cssClasses.appendableClasss)||e.parentElement;t&&(this.sortableFigures.sortableParent=t,this.updateClass(t,this.cssClasses.containment)),s.containers&&"string"==typeof s.containers&&s.containers.split(",").forEach(s=>{document.querySelectorAll("."+s).forEach(s=>{this.updateClass(s,this.cssClasses.appendableClasss),this.handleDefaultHeight(s)})});let l=s.fallBackElement;if(l){if("string"==typeof l){let a=document.createElement("div");a.innerHTML=l,l=a.childNodes[0]}try{l.classList.add(this.cssClasses.fallBackPreview),this.sortableFigures.orignalFallback=l}catch(i){this.throwError("Please enter valid html for fallback Element")}}},updateClass(s,e,t="add"){e&&s?.classList[t](e)},initMouseDown(e,t,l){if(t){let a=this.getItemDetail(t);this.updateClass(t,this.cssClasses.grabbingClass),this.updateClass(t,this.cssClasses.sortingItem),this.updateElementsInitialPosition(t),this.sortableFigures.itemDetails.startedFrom=a,s.onStart({startFrom:a})}l&&(this.updateClass(l,this.cssClasses.grabbingClass),this.sortableFigures.mouseY=e.pageY,this.sortableFigures.mouseX=e.pageX,this.sortableFigures.windowScroll={x:window.scrollX,y:window.scrollY}),this.updateClass(document.body,this.cssClasses.noUserSelection)},updateElementsInitialPosition(s){let e=this.sortableFigures.sortableParent?.scrollTop,t=this.sortableFigures.sortableParent?.scrollLeft;this.sortableFigures.initial.scrollY=e,this.sortableFigures.initial.scrollX=t},movePreview(e){let t=this.sortableFigures.clonedPreview,l=this.sortableFigures.mouseY-e.pageY,a=this.sortableFigures.mouseX-e.pageX,{y:i,x:o}=this.sortableFigures.cloneDistance,n=window.scrollX,r=window.scrollY,{x:c,y:h}=this.sortableFigures.windowScroll;n!==c&&(this.sortableFigures.windowScroll.x=n,o-=n-c),r!==h&&(i+=r-h);let d=e.pageX/s.zoom-a,g=e.pageY/s.zoom-l;t.style.left=d-o+"px",t.style.top=g-i+"px",this.sortableFigures.mouseY=e.pageY,this.sortableFigures.mouseX=e.pageX},sortElement(e,t){let{clientX:l,clientY:a}=e,i=document.elementsFromPoint(l,a),o=(s,e)=>s===e?.parentElement,n=i[0],r=!n?.classList.contains(this.cssClasses.sortingItem)&&!n?.closest("."+this.cssClasses.sortingItem)&&n?.classList.contains(this.cssClasses.sortable),c=i.find(s=>s?.classList.contains(this.cssClasses.containment)),h=i.find(s=>s?.classList.contains(this.cssClasses.appendableClasss)&&!s?.classList.contains(this.cssClasses.clonedPreview)),d=h||c,g=(()=>{let e=this.sortableFigures.orignalFallback;if(e){let t=this.sortableFigures.fallBackElement;if(t?.classList.contains(this.cssClasses.fallBackPreview)&&this.sortableFigures.itemDetails.startedFrom.parent===d&&t.remove(),s.fallBackClone){let l=this.sortableFigures.fallBackClone,a=!l?.classList.contains(this.cssClasses.fallBackClone);if(!a)return l;{let i=e.cloneNode(!0);return this.sortableFigures.fallBackClone=i,this.sortableFigures.fallBackElement=i,this.updateClass(i,this.cssClasses.fallBackClone),i}}return this.sortableFigures.fallBackElement=e,e}return!1})(),u=()=>{if(g&&this.sortableFigures.itemDetails.startedFrom.parent!==d)return!0},C=()=>{let s=s=>{let e=s||t,l=d!==e&&!d.classList.contains(this.cssClasses.clonedPreview)&&!e.closest("."+this.cssClasses.appendableClasss);!o(d,e)&&l&&d.append(e)};g?u()&&s(g):s()},m=()=>{let e=e=>{let l=e||t,i=n.getBoundingClientRect(),o=i.y+i.height/2,r=!n.classList.contains(this.cssClasses.appendableClasss);r&&(o<a/s.zoom?n.after(l):n.before(l))};g?u()&&e(g):e()};if(d){if(h){let{top:b,bottom:p}=h.getBoundingClientRect(),f=a>=b&&a<b+10;if(r){if(f||a<=p&&a>p-10){let v=h.querySelector("."+this.cssClasses.sortable);v?f?g||h.before(t):g||h.after(t):C()}else m()}else C()}else r?m():C()}},terminateMouseDown(e,t){let l="0.3s",a=1e3*parseFloat(l);if(e){let{scrollY:i,scrollX:o}=this.sortableFigures.initial;this.sortableFigures.sortableParent.scrollTo({top:i,left:o,behavior:"smooth"});let n=this.sortableFigures.fallBackElement;if(n){let r=this.getItemDetail(this.sortableFigures.fallBackElement);this.sortableFigures.itemDetails.endedOn=r,this.sortableFigures.fallBackElement=null,this.sortableFigures.fallBackClone=null}else this.sortableFigures.itemDetails.endedOn=this.getItemDetail(e);setTimeout(()=>{this.updateClass(e,this.cssClasses.grabbingClass,"remove"),this.updateClass(e,this.cssClasses.sortingItem,"remove")},a)}else console.error("element not found !");if(t){this.updateClass(t,this.cssClasses.grabbingClass,"remove"),t.style.transition=`${l}`;let{top:c,left:h}=this.getElementPosition(e,s.containment);t.style.top=c+"px",t.style.left=h+"px",t.style.width=getComputedStyle(e).width,setTimeout(()=>{t.remove(),this.updateClass(e,this.cssClasses.sortMoving,"remove")},a)}else console.error("cloned not found !");s.containment&&(s.containment.onscroll=null);let{itemDetails:d}=this.sortableFigures;d.endedOn?.element&&this.anyChange(d)&&s.onSort(d),s.onDrop(d),this.updateClass(document.body,this.cssClasses.noUserSelection,"remove"),s.fallBackElement&&this.sortableFigures.fallBackClone?.classList.remove(this.cssClasses.fallBackClone)}}};function Sortable(s,e={}){if(!s)return console.error("Element is not provided !"),{};let t={containment:null,zoom:1,fallBackClone:!0,onStart(){},onSort(){},onDrop(){},itemClass:"",draggingClass:"",containers:"",disabledClass:"",...e},l=getUtils(t);l.injectCss(),l.setInitalData(s);let a=e=>{e.stopPropagation();let a=l.getClone(s);l.sortableFigures.clonedPreview=a;let n={},{pageX:r,pageY:c}=e,h=e.currentTarget,{x:d,y:g}=h.getBoundingClientRect();n.y=c/t.zoom-g,n.x=r/t.zoom-d,l.sortableFigures.cloneDistance=n,l.initMouseDown(e,s,a),document.addEventListener("mousemove",i),document.addEventListener("mouseup",o)},i=e=>{e.stopPropagation(),l.updateClass(l.sortableFigures.clonedPreview,l.cssClasses.cloneMoving),l.updateClass(s,l.cssClasses.sortMoving),l.movePreview(e),l.sortElement(e,s),l.updateElementsInitialPosition(s)},o=e=>{e.stopPropagation(),l.terminateMouseDown(s,l.sortableFigures.clonedPreview),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",o)};s.addEventListener("mousedown",a),this.disable=function(e=!0){s?e?(s.removeEventListener("mousedown",a),s.classList.remove(l.cssClasses.sortable),t.disabledClass&&s.classList.remove(t.disabledClass)):(s.addEventListener("mousedown",a),t.disabledClass&&s.classList.add(t.disabledClass)):console.error("Unable to disable because the  element you are trying to disable is not sortable")}}